<?php



//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
// SELECT
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

function get_types()
{
	$query = select([
		"t"=> "user_type",
		"f"=> "`uid`, `type`",
		"o"=> "`id`"
	]);
	return $query;
}

function get_scopes()
{
	$query = select([
		"t"=> "user_scopes",
		"f"=> "`uid`, `scope`",
		"o"=> "`id`"
	]);
	return $query;
}

function get_document_types()
{
	$query = select([
		"t"=> "user_document",
		"f"=> "`uid`, `doc`",
		"o"=> "`id`"
	]);
	return $query;
}


function get_users_list()
{
	$query = select([
		"t"=>"users",
		"as"=>"u",
		"f"=>"u.uid as token, u.name, u.last_name, u.email, u.doc, u.phone, u.add_phones, u.enabled, ut.type, ud.doc as doc_type",
		"w"=>"u.type != '4X3HNF23X7F2G39C7G2398GF'",
		"j"=>array(
			array(
				"type"=>"inner",
				"t"=>"user_type",
				"as"=>"ut",
				"on"=>"u.type=ut.uid"
			),
			array(
				"type"=>"inner",
				"t"=>"user_document",
				"as"=>"ud",
				"on"=>"u.doc_type=ud.uid"
			)
		)
	]);
	return $query;
}










//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
// INSERTS
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
//	||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

function insert_user($data)
{
	$uid = uid();
	$data["uid"] = $uid;
	$query = insert([
		"t"=>"users",
		"f"=>$data
	]);
	return $query;
}

?>